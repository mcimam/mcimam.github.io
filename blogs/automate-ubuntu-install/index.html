<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Automate Ubuntu Install | Mcimam - Personal Web</title>
<meta name=keywords content="devops,ubuntu"><meta name=description content="How to create ubuntu autoinstall Creating an automated installation ISO for Ubuntu can save time and ensure consistency across deployments. Here&rsquo;s a step-by-step guide to create your own autoinstall ISO. Automatic Ubuntu installation is performed with the autoinstall format. You might also know this feature as “unattended”, “hands-off” or “preseeded” installation.
This format is supported in the following installers:
Ubuntu Server, version 20.04 and later Ubuntu Desktop, version 23.04 and later Step 1 : Download ubuntu package First, download the latest Ubuntu live server ISO from the official website."><meta name=author content="Mcimam"><link rel=canonical href=https://mcimam.github.io/blogs/automate-ubuntu-install/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://mcimam.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://mcimam.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://mcimam.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://mcimam.github.io/apple-touch-icon.png><link rel=mask-icon href=https://mcimam.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://mcimam.github.io/blogs/automate-ubuntu-install/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Automate Ubuntu Install"><meta property="og:description" content="How to create ubuntu autoinstall Creating an automated installation ISO for Ubuntu can save time and ensure consistency across deployments. Here&rsquo;s a step-by-step guide to create your own autoinstall ISO. Automatic Ubuntu installation is performed with the autoinstall format. You might also know this feature as “unattended”, “hands-off” or “preseeded” installation.
This format is supported in the following installers:
Ubuntu Server, version 20.04 and later Ubuntu Desktop, version 23.04 and later Step 1 : Download ubuntu package First, download the latest Ubuntu live server ISO from the official website."><meta property="og:type" content="article"><meta property="og:url" content="https://mcimam.github.io/blogs/automate-ubuntu-install/"><meta property="og:image" content="https://mcimam.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="blogs"><meta property="article:published_time" content="2024-07-07T20:30:09+07:00"><meta property="article:modified_time" content="2024-07-07T20:30:09+07:00"><meta property="og:site_name" content="Mcimam"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://mcimam.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Automate Ubuntu Install"><meta name=twitter:description content="How to create ubuntu autoinstall Creating an automated installation ISO for Ubuntu can save time and ensure consistency across deployments. Here&rsquo;s a step-by-step guide to create your own autoinstall ISO. Automatic Ubuntu installation is performed with the autoinstall format. You might also know this feature as “unattended”, “hands-off” or “preseeded” installation.
This format is supported in the following installers:
Ubuntu Server, version 20.04 and later Ubuntu Desktop, version 23.04 and later Step 1 : Download ubuntu package First, download the latest Ubuntu live server ISO from the official website."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://mcimam.github.io/blogs/"},{"@type":"ListItem","position":2,"name":"Automate Ubuntu Install","item":"https://mcimam.github.io/blogs/automate-ubuntu-install/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Automate Ubuntu Install","name":"Automate Ubuntu Install","description":"How to create ubuntu autoinstall Creating an automated installation ISO for Ubuntu can save time and ensure consistency across deployments. Here\u0026rsquo;s a step-by-step guide to create your own autoinstall ISO. Automatic Ubuntu installation is performed with the autoinstall format. You might also know this feature as “unattended”, “hands-off” or “preseeded” installation.\nThis format is supported in the following installers:\nUbuntu Server, version 20.04 and later Ubuntu Desktop, version 23.04 and later Step 1 : Download ubuntu package First, download the latest Ubuntu live server ISO from the official website.","keywords":["devops","ubuntu"],"articleBody":"How to create ubuntu autoinstall Creating an automated installation ISO for Ubuntu can save time and ensure consistency across deployments. Here’s a step-by-step guide to create your own autoinstall ISO. Automatic Ubuntu installation is performed with the autoinstall format. You might also know this feature as “unattended”, “hands-off” or “preseeded” installation.\nThis format is supported in the following installers:\nUbuntu Server, version 20.04 and later Ubuntu Desktop, version 23.04 and later Step 1 : Download ubuntu package First, download the latest Ubuntu live server ISO from the official website. Download here\nStep 2: Create file ´autoinstall-user-data´ Next, create a file named autoinstall-user-data. Here’s an example configuration:\n#cloud-config autoinstall: version: 1 identity: hostname: svr password: \"$y$j9T$eKDQKBfE.NOfLgQCzYNLB1$nmJbonWd.WtWoCKMtbTD4HlLK6lEkFj3AI378PDOw23\" username: mcimam ssh: allow-pw: true install-server: true shutdown: reboot For more detail check Ubuntu Autoinstall Ref\nStep 3: Extract iso Extract the contents of the ISO file using the following commands:\nmkdir source-files xorriso -osirrox on -indev ubuntu-24.04-live-server-amd64.iso --extract_boot_images source-files/bootpart -extract / source-files Step 4: Add auto install configuration to iso Add the autoinstall-user-data file to the extracted files:\ncd source-files mkdir nocloud cd nocloud cp ../../autoinstall-user-data user-data touch meta-data Step 5. Add autoinstall menu to grub Edit the GRUB configuration file to add an autoinstall menu entry:\nvi source-files/boot/grub/grub.cfg Add following menu entry:\n# Add this one menuentry \"Autoinstall Ubuntu Server\" { set gfxpayload=keep linux /casper/vmlinuz quiet autoinstall ds=nocloud\\;s=/cdrom/nocloud/ --- initrd /casper/initrd } Step 6. Repack iso file Finally, repack the ISO with the following command:\nxorriso -as mkisofs -r -V \"ubuntu-autoinstall\" -J -boot-load-size 4 -boot-info-table -input-charset utf-8 -eltorito-alt-boot -b bootpart/eltorito_img1_bios.img -no-emul-boot -o ../ubuntu-24.04-server-amd64-autoinstall.iso . Now you have a custom Ubuntu autoinstall ISO ready to use!\nVideo Reference This note is based on tutorial provided by ubuntu and DanielPersson.\nFull video reference from DanielPersson.\n","wordCount":"290","inLanguage":"en","image":"https://mcimam.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-07-07T20:30:09+07:00","dateModified":"2024-07-07T20:30:09+07:00","author":{"@type":"Person","name":"Mcimam"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://mcimam.github.io/blogs/automate-ubuntu-install/"},"publisher":{"@type":"Organization","name":"Mcimam - Personal Web","logo":{"@type":"ImageObject","url":"https://mcimam.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://mcimam.github.io/ accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://mcimam.github.io/ title=Home><span>Home</span></a></li><li><a href=https://mcimam.github.io/blogs/ title=Blogs><span>Blogs</span></a></li><li><a href=https://mcimam.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://mcimam.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://mcimam.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://mcimam.github.io/blogs/>Blogs</a></div><h1 class="post-title entry-hint-parent">Automate Ubuntu Install</h1><div class=post-meta><span title='2024-07-07 20:30:09 +0700 +0700'>July 7, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;290 words&nbsp;·&nbsp;Mcimam&nbsp;|&nbsp;<a href=https://github.com/mcimam/mcimam.github.io/content/blogs/automate-ubuntu-install.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><h1 id=how-to-create-ubuntu-autoinstall>How to create ubuntu autoinstall<a hidden class=anchor aria-hidden=true href=#how-to-create-ubuntu-autoinstall>#</a></h1><p>Creating an automated installation ISO for Ubuntu can save time and ensure consistency across deployments. Here&rsquo;s a step-by-step guide to create your own autoinstall ISO. Automatic Ubuntu installation is performed with the autoinstall format. You might also know this feature as “unattended”, “hands-off” or “preseeded” installation.</p><p>This format is supported in the following installers:</p><ul><li>Ubuntu Server, version 20.04 and later</li><li>Ubuntu Desktop, version 23.04 and later</li></ul><h2 id=step-1--download-ubuntu-package>Step 1 : Download ubuntu package<a hidden class=anchor aria-hidden=true href=#step-1--download-ubuntu-package>#</a></h2><p>First, download the latest Ubuntu live server ISO from the official website.
Download <a href=https://ubuntu.com/download>here</a></p><h2 id=step-2-create-file-autoinstall-user-data>Step 2: Create file ´autoinstall-user-data´<a hidden class=anchor aria-hidden=true href=#step-2-create-file-autoinstall-user-data>#</a></h2><p>Next, create a file named autoinstall-user-data. Here&rsquo;s an example configuration:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=c>#cloud-config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>autoinstall</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>identity</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hostname</span><span class=p>:</span><span class=w> </span><span class=l>svr</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;$y$j9T$eKDQKBfE.NOfLgQCzYNLB1$nmJbonWd.WtWoCKMtbTD4HlLK6lEkFj3AI378PDOw23&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>mcimam</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ssh</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>allow-pw</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>install-server</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>shutdown</span><span class=p>:</span><span class=w> </span><span class=l>reboot</span><span class=w>
</span></span></span></code></pre></div><p>For more detail check <a href=https://canonical-subiquity.readthedocs-hosted.com/en/latest/reference/autoinstall-reference.html>Ubuntu Autoinstall Ref</a></p><h2 id=step-3-extract-iso>Step 3: Extract iso<a hidden class=anchor aria-hidden=true href=#step-3-extract-iso>#</a></h2><p>Extract the contents of the ISO file using the following commands:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>mkdir source-files
</span></span><span class=line><span class=cl>xorriso -osirrox on -indev ubuntu-24.04-live-server-amd64.iso --extract_boot_images source-files/bootpart -extract / source-files
</span></span></code></pre></div><h2 id=step-4-add-auto-install-configuration-to-iso>Step 4: Add auto install configuration to iso<a hidden class=anchor aria-hidden=true href=#step-4-add-auto-install-configuration-to-iso>#</a></h2><p>Add the autoinstall-user-data file to the extracted files:</p><pre tabindex=0><code>cd source-files
mkdir nocloud
cd nocloud
cp ../../autoinstall-user-data user-data
touch meta-data
</code></pre><h2 id=step-5-add-autoinstall-menu-to-grub>Step 5. Add autoinstall menu to grub<a hidden class=anchor aria-hidden=true href=#step-5-add-autoinstall-menu-to-grub>#</a></h2><p>Edit the GRUB configuration file to add an autoinstall menu entry:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>vi source-files/boot/grub/grub.cfg
</span></span></code></pre></div><p>Add following menu entry:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cfg data-lang=cfg><span class=line><span class=cl><span class=c1># Add this one</span>
</span></span><span class=line><span class=cl><span class=na>menuentry &#34;Autoinstall Ubuntu Server&#34; {</span>
</span></span><span class=line><span class=cl>    <span class=na>set gfxpayload</span><span class=o>=</span><span class=s>keep
</span></span></span><span class=line><span class=cl><span class=s>    linux   /casper/vmlinuz quiet autoinstall ds=nocloud\;s=/cdrom/nocloud/  ---
</span></span></span><span class=line><span class=cl><span class=s>    initrd  /casper/initrd</span>
</span></span><span class=line><span class=cl><span class=na>}</span>
</span></span></code></pre></div><h2 id=step-6-repack-iso-file>Step 6. Repack iso file<a hidden class=anchor aria-hidden=true href=#step-6-repack-iso-file>#</a></h2><p>Finally, repack the ISO with the following command:</p><pre tabindex=0><code>xorriso -as mkisofs -r -V &#34;ubuntu-autoinstall&#34; -J -boot-load-size 4 -boot-info-table -input-charset utf-8 -eltorito-alt-boot -b bootpart/eltorito_img1_bios.img -no-emul-boot -o ../ubuntu-24.04-server-amd64-autoinstall.iso .
</code></pre><p>Now you have a custom Ubuntu autoinstall ISO ready to use!</p><h2 id=video-reference>Video Reference<a hidden class=anchor aria-hidden=true href=#video-reference>#</a></h2><p>This note is based on tutorial provided by ubuntu and DanielPersson.</p><p>Full video reference from DanielPersson.</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/DtXZ6BMaKbA?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://mcimam.github.io/tags/devops/>Devops</a></li><li><a href=https://mcimam.github.io/tags/ubuntu/>Ubuntu</a></li></ul><nav class=paginav><a class=next href=https://mcimam.github.io/blogs/hello-world/><span class=title>Next »</span><br><span>Hello World</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://mcimam.github.io/>Mcimam - Personal Web</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>